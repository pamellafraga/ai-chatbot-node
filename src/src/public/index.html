<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chatbot JS + AI</title>
</head>
<body style="font-family: system-ui; max-width: 720px; margin: 40px auto;">
  <h1>Chatbot (Node.js + OpenAI)</h1>
  <p>Digite sua pergunta:</p>
  <textarea id="msg" rows="4" style="width:100%"></textarea>
  <button id="send">Enviar</button>
  <pre id="out" style="background:#111;color:#eee;padding:12px;min-height:120px;margin-top:16px;"></pre>

  <script>
    // Obtém referências aos elementos da interface
    const msg = document.getElementById('msg'); // textarea onde o usuário digita a pergunta
    const out = document.getElementById('out'); // área onde a resposta será exibida

    // Define ação ao clicar no botão "Enviar"
    document.getElementById('send').onclick = async () => {
      // Exibe mensagem de carregamento enquanto consulta a API
      out.textContent = 'Consultando...';

      // Envia a mensagem digitada para a API do backend
      const r = await fetch('/chat', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ message: msg.value })
      });

      // Aguarda a resposta da API e converte para JSON
      const j = await r.json();

      // Exibe a resposta da IA ou o erro retornado
      out.textContent = j.answer || JSON.stringify(j, null, 2);
    };
  </script>
</body>
</html>
